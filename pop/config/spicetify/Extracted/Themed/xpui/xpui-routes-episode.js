(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[472],{76105:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Episode:()=>ae,default:()=>le});var l=a(27378),n=a.n(l),i=a(79308),s=a(41056),r=a(61043),o=a(66917),c=a.n(o),d=a(15941),u=a(71338),m=a(59172),p=a(23301),g=a(60858),E=a(14105);const y="episode-episode-episode",f="episode-episode-contentDescription",v="episode-episode-contentDescriptionTitle";a(23615);var b=a(60042),k=a.n(b),L=a(62062);const h="episode-episodesShelf-EpisodesShelf",P="episode-episodesShelf-Title",I="episode-episodesShelf-EpisodesList";var _=a(53177),A=a(34514);const B=({title:e,episodes:t,className:a})=>n().createElement("div",{className:k()(h,a)},n().createElement(_.Dy,{as:"h2",variant:_.Dy.canon,color:A.white,className:P},e),n().createElement("div",{className:I},t.map((e=>n().createElement(L.B,{key:e.id,entity:e})))));var M=a(52110),S=a(11111),w=a(96415),N=a(40079),U=a(60247),C=a(37539);const R="episode-episodeEntityHeader-container",Z="episode-episodeEntityHeader-smallHeader";var x=a(42271),D=a(34907),z=a(41113),T=a(91030),$=a(19369),O=a(39551),G=a(43031),W=a(81105);const F=e=>{const t=c().from(e);return`/show/${c().hexToId((null==t?void 0:t.id)||"")}`},J=({uri:e,backgroundColor:t,backgroundImages:a,size:i,data:s,playButtonWrapper:r=null,contextMenuWrapper:o=W.j,onPlayClick:c,isPlaying:d,isPlayDisabled:u=!1,playButtonRef:m,actionBarHeader:p,actionBarButtons:g})=>{const E=(0,l.useRef)(null),{imageUrl:y}=(0,N.f)(a,E),{title:f="",subtitle:v="",subtitleLinkURI:b,type:L,displayType:h,images:P}=s;return n().createElement(n().Fragment,null,n().createElement("div",{"data-testid":"container",ref:E,style:{backgroundColor:t},className:k()(C.Z.container,R,C.Z.overlay,{[C.Z.withBackgroundImage]:y,[C.Z.smallHeader]:i===G.f.SMALL,[Z]:i===G.f.SMALL})},y&&n().createElement(n().Fragment,null,n().createElement("div",{"data-testid":"background-image",className:k()(C.Z.background,C.Z.gradient),style:{backgroundImage:`url(${y})`}}),n().createElement("div",{className:k()(C.Z.background,C.Z.overlay)})),n().createElement(o,{uri:e,contextUri:e},n().createElement(D.O,{title:f,className:C.Z.image,size:i===G.f.SMALL?z.m$.SIZE_56:z.m$.SIZE_200,type:L,images:P,shape:D.K.ROUNDED_CORNERS})),n().createElement(x.sP,null,i!==G.f.SMALL&&n().createElement(_.Dy.p,{variant:_.$e.minuetBold},h),n().createElement(o,{uri:e,contextUri:e},n().createElement(x.xd,{size:i===G.f.SMALL?$.Jj.SMALL:$.Jj.LARGE},f)),n().createElement(x.dy,{small:i===G.f.SMALL,large:i===G.f.LARGE},b&&n().createElement(o,{uri:b,contextUri:e},n().createElement(U.rU,{to:F(b)},v))))),n().createElement(T.o,{backgroundColor:t,size:i===G.f.SMALL?T.m.SMALL:T.m.LARGE,playButton:i===G.f.MOBILE?null:n().createElement("div",{className:C.Z.stickyPlayButton,ref:m},r?r(n().createElement(O.JM,{size:O.qE.lg,onClick:c,isPlaying:d,disabled:u})):n().createElement(O.JM,{size:O.qE.lg,onClick:c,isPlaying:d,disabled:u})),header:p,secondaryActionButtons:g}))};var j=a(2031),H=a(64436),q=a(76638),K=a(65296),X=a(98417),Y=a(27599),Q=a(82075),V=a(54753),ee=a(84998),te=a(82385);const ae=e=>{var t,a,s,o,b,k,L,h;const{uri:P}=e,I=(0,i.I0)(),A=(0,S.o)(),N=(0,i.v9)((e=>e.entities.tracks[P])),U=(0,i.v9)((e=>{var t,a;return null===(t=e.entities.similarEpisodes)||void 0===t||null===(a=t[P])||void 0===a?void 0:a.map((t=>e.entities.tracks[t]))})),C=(0,i.v9)(w.dO),R=(0,i.v9)(X.fL),Z=(0,i.v9)(X.Ys)===P,x=C.isPlaying&&C.trackURI===P,D=null==N||null===(t=N.show)||void 0===t?void 0:t.uri,z=null==N?void 0:N.episodeType,T={displayType:"EPISODE"===(null==N?void 0:N.episodeType)?r.ag.get("type.showEpisode"):r.ag.get("type.podcastEpisode"),title:(null==N?void 0:N.name)||"",subtitle:null==N||null===(a=N.show)||void 0===a?void 0:a.name,subtitleLinkURI:null==N||null===(s=N.show)||void 0===s?void 0:s.uri,images:(null==N?void 0:N.images)||[],type:j.p.episode},$=null==N||null===(o=N.images)||void 0===o||null===(b=o[0])||void 0===b?void 0:b.url,O=(0,te.Z)($||null);(0,l.useEffect)((()=>{if(!N)return void I((0,d.N5)(P));const{name:e,show:t}=N;I((0,d.y7)(P)),I((0,d.PA)(D)),I((0,u.Dk)(r.ag.get("podcasts.episode.seo.title",{name:e,show:(null==t?void 0:t.name)||""})))}),[I,N,P,D]);const W=null===(k=(0,i.oR)().getState().platform)||void 0===k?void 0:k.isBrowser,F=(0,l.useCallback)((e=>{const t=parseInt(e,10)||0;let a="play";x&&0===t&&(a="pause"),A({intent:a,targetUri:P,type:"click",itemIdSuffix:t>0?"podcast-description-timestamp":"button"}),z===q.Wf.Episode&&W?m.y.set((()=>({triggerId:K.P.musicPlusTalkEpisode,triggerAction:null}))):I((0,p.mU)(P,t))}),[I,x,P,A,z,W]),ae=(0,l.useCallback)((()=>{A({intent:"expand-description",type:"click"})}),[A]),le=(0,l.useCallback)((e=>W?n().createElement(K.c,{id:K.P.musicPlusTalkEpisode,targetURI:c().from(P)},e):e),[P,W]);return N?n().createElement("section",{className:y},n().createElement(J,{uri:N.uri,backgroundColor:O,size:G.f.LARGE,data:T,onPlayClick:F,isPlaying:x,isPlayDisabled:!N.is_playable,playButtonWrapper:le,contextMenuWrapper:ee.X,actionBarHeader:n().createElement(M.E,{size:M.$.LARGE,fullyPlayed:(null===(L=N.resume_point)||void 0===L?void 0:L.fully_played)||!1,durationMs:N.duration_ms,releaseDate:N.release_date,resumePositionMs:(null==N||null===(h=N.resume_point)||void 0===h?void 0:h.resume_position_ms)||0,isPlaying:x,position:Z?R:void 0}),actionBarButtons:n().createElement(n().Fragment,null,n().createElement(E.p,{uri:N.uri,showUri:D}),n().createElement(Y.y,{menu:n().createElement(Q.k,{uri:P,sharingInfo:N.sharingInfo,showUri:D,contextUri:P})},n().createElement(V.z,null)))}),n().createElement("div",{className:"contentSpacing"},N.description&&n().createElement(n().Fragment,null,n().createElement(_.Dy,{as:"h2",variant:_.$e.canon,color:"var(--spice-text)",className:v},r.ag.get("episode.description-title")),n().createElement(H.o,{className:f,onTimeStampClick:F,maxLines:4,onExpanded:ae,content:(N.description||"").trim()})),(null==U?void 0:U.length)>0&&n().createElement(B,{title:r.ag.get("mwp.entity.might.like"),episodes:U}))):n().createElement(g.h,{errorMessage:r.ag.get("error.not_found.title.podcast")})},le=n().memo((()=>{const{episodeId:e}=(0,s.UO)(),t=`spotify:episode:${e}`;return n().createElement(ae,{uri:t})}))}}]);