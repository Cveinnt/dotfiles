(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[450],{37813:(e,t,n)=>{"use strict";n.d(t,{c:()=>ye});var a=n(65526),r=n.n(a),l=n(27378),c=n.n(l),s=n(26855),o=n(45127),i=n(7593),u=n(29467),m=n(50641),d=n(60042),f=n.n(d);const g="view-homeShortcutsGrid-shortcuts",b="view-homeShortcutsGrid-grid",y="view-homeShortcutsGrid-shortcutLink",E="view-homeShortcutsGrid-shortcut",v="view-homeShortcutsGrid-draggable",p="view-homeShortcutsGrid-imageContainer",h="view-homeShortcutsGrid-imageWrapper",k="view-homeShortcutsGrid-image",w="view-homeShortcutsGrid-fallbackWrapper",C="view-homeShortcutsGrid-main",P="view-homeShortcutsGrid-name",I="view-homeShortcutsGrid-PlayButtonContainer",L="view-homeShortcutsGrid-PlayButtonContainerVisible";var O=n(53177),_=n(86344),A=n(52933),T=n(3045),N=n(79153),M=n(34514),D=n(55951),S=n(2398),U=n.n(S),x=n(61043),B=n(66917),j=n.n(B),F=n(91580),R=n(80936),W=n(90453),G=n(12548),H=n(21114),J=n(33102),Y=n(41056),V=n(11111),q=n(45624),z=n(39551),$=n(30245),Q=n(98417),Z=n(18308),K=n(65821),X=n(21483);const ee=c().memo((({images:e=[],fallbackIcon:t=F.e})=>{const n=(0,K.Z)(e),a=null!=n&&n.url?h:w;return c().createElement("div",{className:p},c().createElement("div",{className:a},c().createElement(X.E,{className:k,src:null==n?void 0:n.url,loading:"lazy",testid:"shortcut-image"},c().createElement(t,{"aria-hidden":!0}))))}));var te=n(97060);const ne=c().memo((({item:e,fallbackIcon:t,showPlayButton:n,onContextMenu:a=(()=>{}),onTouchStart:r=(()=>{}),onTouchEnd:s=(()=>{})})=>{const o=(0,Y.k6)(),i=(0,V.o)(),{setColorFromUri:u,resetColor:m}=(0,te.WQ)(),{currentlyPlayingUri:d,isPlaybackPlaying:g,playContext:b,pause:p,resume:h}=(0,l.useContext)(Z.CF),k=(0,Q.B6)(d,e.uri);const w=Boolean(g&&k),_=(0,l.useCallback)((()=>{i({targetUri:e.uri,intent:"navigate",type:"click"}),o.push(j().from(e.uri).toURLPath(!0))}),[o,e.uri,i]),A=(0,l.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return c().createElement("div",{className:E,onContextMenu:a,onTouchStart:r,onTouchEnd:s,onMouseEnter:A,onMouseLeave:m,onFocus:A,onBlur:m},c().createElement(q.Z,{uri:e.uri,text:e.name,extraClassName:v},c().createElement(ee,{images:e.images,fallbackIcon:t}),c().createElement("div",{className:C},c().createElement($.r,{to:e.uri,onClick:_,title:e.name},c().createElement(O.Dy.p,{variant:O.Dy.balladBold,className:P},e.name)),n&&c().createElement("div",{className:f()(I,{[L]:w})},c().createElement(z.JM,{size:z.qE.sm,isPlaying:w,onClick:function(){i({targetUri:e.uri,intent:Boolean(g&&k)?"pause":"play",type:"click"}),k?g?p():h():b(e.uri)}}))),c().createElement("div",{onClick:_,className:y})))}));var ae=n(92394),re=n(25118),le=n(45572);const ce=c().memo((e=>c().createElement(H._,{menu:c().createElement(J.X,{uri:e.item.uri})},c().createElement(ne,U()({},e,{fallbackIcon:F.e}))))),se=c().memo((e=>c().createElement(H._,{menu:c().createElement(ae.Y,{uri:e.item.uri})},c().createElement(ne,U()({},e,{fallbackIcon:R.u}))))),oe=c().memo((e=>c().createElement(H._,{menu:c().createElement(re.m,{uri:e.item.uri})},c().createElement(ne,U()({},e,{fallbackIcon:W.i}))))),ie=c().memo((e=>c().createElement(H._,{menu:c().createElement(le.M,{uri:e.item.uri})},c().createElement(ne,U()({},e,{fallbackIcon:G.n})))));var ue=n(56958);const me=c().memo((({tagline:e,items:t})=>{const{fetchMultipleColors:n}=(0,te.WQ)(),[a,r]=(0,l.useState)(270),s=!(0,ue.k)(),o=(0,l.useRef)(null),i=(()=>{const e=(new Date).getHours();let t=x.ag.get("home.evening");return e>0&&e<12?t=x.ag.get("home.morning"):e<18&&(t=x.ag.get("home.afternoon")),t})(),u=(0,l.useCallback)((()=>{const e=o.current;if(null==e||!e.parentElement)return;const t=(n=e.parentElement.offsetWidth)<700?240:n>=700&&n<1400?270:300;var n;t!==a&&r(t)}),[a]);(0,D.a)((()=>{u()})),(0,l.useLayoutEffect)((()=>{u()})),(0,l.useEffect)((()=>{const e=(null==t?void 0:t.map(te.lh))||[];n(e)}),[t,n]);const m=(0,l.useCallback)(((e,n)=>{if(null==t||!t.length)return null;const a=n>=270;return c().createElement(c().Fragment,null,t.filter(((t,n)=>n<2*e)).map(((e,t)=>{const n=function(e){const t=(j().from(e)||{}).type;switch(t){case j().Type.ARTIST:return oe;case j().Type.ALBUM:case j().Type.COLLECTION_ALBUM:return se;case j().Type.PLAYLIST:case j().Type.PLAYLIST_V2:return ce;case j().Type.SHOW:return ie;case j().Type.COLLECTION:return ce;default:return console.warn(`Unable to resolve entity shortcut from ${e} of type "${t||"unknown"}"`),ie}}(e.uri);return c().createElement(n,{key:e.id,item:e,showPlayButton:a,shouldSetBackgroundColor:0===t})})))}),[t]);return s||null==t||!t.length?null:c().createElement("section",{className:g,"aria-label":i,ref:o},c().createElement(T.r,{title:i,titleVariant:O.Dy.alto,tagline:e}),c().createElement(N.T,{className:f()(b),columnAware:!0,render:m,minimumColumnWidth:a,rowGap:M.spacer16}))})),de=(0,_.P)(me,(()=>null),(e=>(0,A.v)({from:"HomeShortcutsGrid",error:e})));var fe=n(47050);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ye=({spaces:e,viewName:t,viewId:n,isAnonymous:a})=>{const r=(0,l.useCallback)((e=>{const t=((e,t)=>{let{uri:n}=e;return e.href.includes("https://api.spotify.com/v1/views/")&&(n=e.href.replace("https://api.spotify.com/v1/views/","spotify:genre:"),n.endsWith("-page")||(n+="-page"),"hub-browse-grid"===t&&(n=n.replace(":view:",":genre:"))),n})(e,n),a=(0,u.U)(t);return c().createElement(a,{key:e.href,entity:be(be({},e),{},{uri:t})})}),[n]),d=(0,l.useCallback)(((e,t)=>{const n=(0,u.U)(e.uri);return c().createElement(i.JL,{key:e.uri||t,value:"card",index:t},c().createElement(n,{entity:e}))}),[]),f=(0,l.useCallback)(((e,t)=>{switch(e.type){case"link":return r(e);default:return d(e,t)}}),[d,r]),g=(0,l.useCallback)((e=>!((e=>"HEADER"===e.rendering)(e)||0===e.content.total||a&&"uniquely-yours-shelf"===e.id)),[a]);return e&&0!==e.length?e[0].content?c().createElement(c().Fragment,null,e.filter(g).map(((e,t)=>{const a=e.content&&(0,s.pL)((0,s.SK)(e.href));return e.id===o.RECENTLY_PLAYED_VIEW_ID||e.id===m.u?c().createElement(i.JL,{value:"headered-grid",index:t,key:e.id},c().createElement(o.default,{showAll:!1})):"shortcuts"===e.id?c().createElement(i.JL,{value:"headered-grid",index:t,key:e.id},c().createElement(de,{items:e.content.items,title:e.name,tagline:e.tag_line})):c().createElement(i.JL,{value:"headered-grid",index:t,key:e.id},c().createElement(fe.P,{total:e.content.total,seeAllUri:a,pageId:n,title:e.name,tagline:e.tag_line||void 0},e.content.items.map(f)))}))):c().createElement(i.JL,{value:"headered-grid"},c().createElement(fe.P,{showAll:!0,title:t,total:(null==e?void 0:e.length)||0},null==e?void 0:e.map(f))):null}},21948:(e,t,n)=>{"use strict";n.r(t),n.d(t,{View:()=>D,default:()=>S});var a=n(27378),r=n.n(a),l=n(60042),c=n.n(l),s=n(93512),o=n(71338),i=n(15941),u=n(79308),m=n(57741);const d="view-viewContainer-header",f="view-viewContainer-content",g="view-viewContainer-contentContainer",b="view-viewContainer-genreContent";var y=n(76318),E=n(18308),v=n(75604),p=n(23301),h=n(60858),k=n(61043),w=n(41056),C=n(26855),P=n(74544),I=n(58681),L=n(55157),O=n(96415),_=n(4467),A=n(37813),T=n(2146);const N=e=>"HEADER"===e.rendering,M=e=>{const{title:t,images:n,backgroundColor:a}=e;return r().createElement(r().Fragment,null,((e,t=[],n)=>{if(!e)return null;const a=t.filter((e=>"background"===e.name));return r().createElement(P.gF,{backgroundImages:a,backgroundColor:n,size:0===a.length?P.fR.SMALL:P.fR.DEFAULT},r().createElement(I.W,null,r().createElement(L.i,{text:e})),r().createElement(P.sP,null,r().createElement(P.xd,null,e)))})(t,n,a))},D=r().memo((({viewData:e,viewId:t,backgroundColor:n,isPlaybackPlaying:l,currentlyPlayingUri:m,isFullyLoaded:C,country:P,isGenre:I,isAnonymous:L})=>{const O=(0,u.I0)(),T=(0,w.k6)(),D=!!e,S=null==e?void 0:e.name,U=(0,a.useCallback)((()=>{O((0,i.MM)(t,P)),O((0,y.browseItemsStyleRequest)())}),[t,P,O]);(0,a.useEffect)((()=>{!P||D&&"POP"===T.action||!t||U(),O((0,o.Dk)(S))}),[P,t,T.action,O,S,D,U]);const x=(0,a.useCallback)((()=>[/ginger-genre-affinity/].some((t=>{var n;return null==e||null===(n=e.href)||void 0===n?void 0:n.match(t)}))),[e]),B=(0,a.useCallback)((()=>{if(!e)return;const n=x();C||n||O((0,i.Ex)(t))}),[x,C,O,e,t]),j=(0,a.useMemo)((()=>{const{content:{items:t=[]}={}}=e||{},n=t.filter(N);return n.length>0?n[0]:null}),[e]),F=(0,a.useMemo)((()=>{const{name:t}=e||{};return j?j.name:n&&t}),[n,j,e]),R=(0,a.useMemo)((()=>I||Boolean(F)),[I,F]),W=(0,a.useMemo)((()=>!(!e||!Array.isArray(e.content.items))&&R),[R,e]),G=(0,a.useMemo)((()=>({currentlyPlayingUri:m,isPlaybackPlaying:l,playContext:e=>O(p.nh(e)),pause:()=>O(p.wO()),resume:()=>O(p.v4())})),[O,m,l]),H=r().createElement(M,{title:(null==j?void 0:j.name)||F,images:(null==j?void 0:j.images)||[],backgroundColor:n}),J=null==e?void 0:e.content.items;return r().createElement(E.CF.Provider,{value:G},e?r().createElement(s.C,{onReachBottom:B},r().createElement("section",{className:c()({[d]:(null==j?void 0:j.name)||F})},W&&r().createElement(_.H,{color:n||null}),R&&H,r().createElement("div",{className:g},R&&H&&r().createElement(v.I,{backgroundColor:n}),r().createElement("div",{className:c()(f,"contentSpacing",{[b]:I})},r().createElement(A.c,{spaces:J,viewName:e.name,viewId:t,isAnonymous:L}))))):r().createElement(h.h,{errorMessage:k.ag.get("error.not_found.title.page")}))})),S=r().memo((({viewId:e,match:t})=>{const n=e||t.params.viewId,{isAnonymous:a}=(0,u.v9)(T.Gg),l=(0,u.v9)(m.r),c=(0,u.v9)((e=>e.entities.views[n]||null)),s=!c||null===c.content.next,o=n.endsWith("-page")?n:`${n}-page`,i=(0,u.v9)((e=>{var t,n;return(null===(t=e.browse.allItemsStyle)||void 0===t||null===(n=t[o])||void 0===n?void 0:n.color)||""})),d=e=>e.viewId===n||"href"in e&&e.href===(0,C.pL)(n),{currentlyPlayingUri:f="",isPlaybackPlaying:g=!1}=(0,u.v9)(O.dO)||{},b=(0,u.v9)((e=>{var t,n,a,r;return(null==e||null===(t=e.browse)||void 0===t||null===(n=t.browseAll)||void 0===n?void 0:n.items.some(d))||(null==e||null===(a=e.browse)||void 0===a||null===(r=a.topGenres)||void 0===r?void 0:r.items.some(d))||!!i}));return r().createElement(D,{isPlaybackPlaying:g,currentlyPlayingUri:f,viewData:c,isFullyLoaded:s,viewId:n,backgroundColor:i,country:l,isGenre:b,isAnonymous:a})}))}}]);