(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[833],{88706:(e,t,a)=>{"use strict";a.d(t,{M:()=>w});var s=a(27378),r=a.n(s),c=a(60042),l=a.n(c),n=a(41056),o=a(66917),i=a.n(o),u=a(61043),d=a(747),m=a(68253);const f=e=>r().createElement(m.Z,e,r().createElement("path",{d:"M349.714 347.937l93.714 109.969-16.254 13.969-93.969-109.969q-48.508 36.825-109.207 36.825-36.826 0-70.476-14.349t-57.905-38.603-38.603-57.905-14.349-70.476 14.349-70.476 38.603-57.905 57.905-38.603 70.476-14.349 70.476 14.349 57.905 38.603 38.603 57.905 14.349 70.476q0 37.841-14.73 71.619t-40.889 58.921zM224 377.397q43.428 0 80.254-21.461t58.286-58.286 21.461-80.254-21.461-80.254-58.286-58.285-80.254-21.46-80.254 21.46-58.285 58.285-21.46 80.254 21.46 80.254 58.285 58.286 80.254 21.461z",fill:"currentColor"})),h="x-searchInput-searchInput",y="x-searchInput-searchInputInput",p="x-searchInput-darkMode",b="x-searchInput-searchInputSearchIcon",g="x-searchInput-searchInputClearButton",E="x-searchInput-searchInputIconContainer",v="x-searchInput-searchInputIcon";var k=a(79308),R=a(2931),C=a(88387),N=a(55996),I=a(18308),U=a(72519),S=a(86677);const w=r().memo((({onSearch:e=!0})=>{const t=(0,s.useRef)(null),a=(0,s.useRef)(null),c=(0,n.k6)(),o=(0,k.I0)(),m=(0,n.$B)("/search/:query?/:category?"),{query:w="",category:q=""}=(null==m?void 0:m.params)||{};let P;try{P=decodeURIComponent(w||"")}catch(e){P=w}const[L,x]=(0,s.useState)(P),_=R.categories.includes(q),{scrollNodeRef:T}=r().useContext(I.VX),M=(0,U.y)(((e,t)=>{t?c.push(`/search/${encodeURIComponent(e)}`):c.replace(`/search/${encodeURIComponent(e)}`),T.current&&(T.current.scrollTop=0),o(C.Z.searchRequest(e))}),200),D=new URLSearchParams(location.search),Z=Boolean(D.get("showRecent")),A=_||Z;(0,s.useEffect)((()=>{!A&&e&&t.current!==document.activeElement&&(a.current=document.activeElement,t.current&&t.current.focus())}),[c.location.key,e,A]);return r().createElement("div",{className:l()(h,{[p]:!e}),role:"search"},r().createElement("input",{ref:t,className:l()(y,S.Z.mesto),value:L,maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,onChange:e=>{const t=e.currentTarget.value;x(t),M(t,A)},onKeyDown:e=>{if("Escape"===e.key)L?(x(""),M("",A)):(t.current&&t.current.blur(),a.current instanceof HTMLElement&&a.current.focus());else if("Enter"===e.key){const e=decodeURIComponent(L),t=i().from(e);if(!t)return;switch(t.type){case i().Type.AD:{const e=i().idToHex(t._base62Id);if(t._base62Id===e)return;return void o((0,N.HI)(e))}default:c.push(t.toURLPath(!0))}}},placeholder:e?u.ag.get("search.search-for-label"):u.ag.get("navbar.search"),onFocus:()=>{!A&&e||M(L,A)},"data-testid":"search-input"}),r().createElement("div",{className:E},r().createElement("span",{className:b},r().createElement(f,{size:24,viewBox:"0 0 512 512",className:v,"aria-hidden":!0})),L&&r().createElement("button",{className:g,onClick:()=>{t.current&&t.current.focus(),x(""),M("",A)},"aria-label":u.ag.get("search.a11y.clear-input")},r().createElement(d.Z,{size:24,className:v}))))}))},2931:(e,t,a)=>{"use strict";a.r(t),a.d(t,{SearchPage:()=>We,categories:()=>Ge,default:()=>je,routes:()=>Be});var s=a(27378),r=a.n(s),c=a(79308),l=a(88387),n=a(71338),o=a(18308),i=a(61043),u=a(41056);const d="x-searchHistoryEntries-searchHistory",m="x-searchHistoryEntries-clearSearchHistory",f="x-searchHistoryEntries-clearSingleSearchHistory",h="x-searchHistoryEntries-clearSingleSearchHistoryButton";var y=a(47050),p=a(29467),b=a(7593),g=(a(23615),a(747));const E="x-removeButton-RemoveButton";class v extends r().Component{render(){const{onClick:e,size:t}=this.props;return r().createElement("button",{style:{"--size":`${t}px`},className:E,onClick:e,"aria-label":"Remove"},r().createElement(g.Z,{size:t-4}))}}v.defaultProps={size:32};var k=a(76750),R=a(53177);const C=()=>{const{searchHistory:e,clearSearchHistory:t}=(0,k.ZP)(),{showRecent:a,onSearchRequest:s}=r().useContext(o.ci);return e.length>0?r().createElement("div",{className:d},r().createElement(y.P,{total:e.length,seeAllUri:"spotify:app:recent-searches",title:i.ag.get("search.title.recent-searches"),showAll:a},e.map(((e,a)=>{const s=(0,p.U)(e.uri);return r().createElement("div",{className:f,key:e.uri},r().createElement(b.ZP,{index:a,value:"search-history"},r().createElement(s,{entity:e}),r().createElement("div",{className:h},r().createElement(v,{size:28,onClick:()=>t(e.uri)}))))}))),a?r().createElement("button",{onClick:()=>{t(),s("")},className:m},r().createElement(R.Dy,{as:"span",variant:R.Dy.minuetBold},i.ag.get("search.clear-recent-searches"))):null):null};var N=a(79153);const I="x-searchResults-hasHero",U="x-searchResults-topResult",S="x-searchResults-searchResults",w=({topHit:e,prependItemToSearchHistory:t})=>{const a=e&&(0,p.U)(e.hits[0].uri),s=(null==e?void 0:e.total)||0;return r().createElement(y.P,{total:s,className:I,title:i.ag.get("search.title.top-result")},e&&a?[r().createElement("div",{key:"top-result-item",className:U},r().createElement(b.ZP,{value:"top-result-card"},r().createElement(a,{isHero:!0,onClick:()=>t(e.hits[0]),onPlay:()=>t(e.hits[0]),key:e.hits[0].uri,entity:e.hits[0]})))]:[])};var q=a(30245);const P="x-searchResultsTracks-header",L="x-searchResultsTracks-topRow",x="x-searchResultsTracks-titleWrapper",_="x-searchResultsTracks-title",T="x-searchResultsTracks-root",M="x-searchResultsTracks-tracks";var D=a(97861),Z=a(38517),A=a(24368);const $=r().memo((({tracks:e})=>{const t=(0,s.useCallback)(((e,t)=>{var a;const s=(e.tags||[]).includes("MOGEF-19+"),c=!(!1===e.is_playable);return r().createElement(Z.pt,{key:e.uri,index:t,imgUrl:null===(a=e.images)||void 0===a?void 0:a[0].url,uri:(0,A.$V)(e),duration_ms:e.duration||e.duration_ms,name:e.name,album:e.album,artists:e.artists,isPlayable:c,isMOGEFRestricted:s,isExplicit:!!e.explicit})}),[]);return e&&r().createElement(b.ZP,{value:"search-results-tracklist"},r().createElement(Z.Pv,{ariaLabel:i.ag.get("search.a11y.songs-search-results"),renderRow:t,rowPlaceholder:Z.hU,nrTracks:Math.min(e.length,4),tracks:e,resolveUri:e=>e.uri,columns:[Z.QD.TITLE,Z.QD.DURATION]}))}),((e,t)=>e.tracks===t.tracks)),H=({tracks:e,query:t})=>{var a;const c=(0,s.useCallback)((()=>r().createElement(r().Fragment,null,r().createElement("div",{className:M},r().createElement(s.Suspense,{fallback:null},r().createElement($,{tracks:e.hits}))))),[e]);if(null==e||null===(a=e.hits)||void 0===a||!a.length)return null;const l=`spotify:app:search:${encodeURIComponent(t)}:tracks`;return r().createElement("section",{className:T,"aria-label":i.ag.get("search.title.tracks"),"data-testid":"search-tracks-result"},r().createElement("div",{className:P},e.hits.length>3?r().createElement("div",{className:L},r().createElement("div",{className:x},r().createElement(R.Dy,{as:"h2",variant:R.Dy.canon},r().createElement(q.r,{to:l,className:_},i.ag.get("search.title.tracks")))),r().createElement(D.e,{link:l})):r().createElement(R.Dy,{as:"h2",variant:R.Dy.canon,className:_},i.ag.get("search.title.tracks"))),r().createElement(N.T,{render:c}))},z=({topRecommendations:e,prependItemToSearchHistory:t,query:a})=>e?r().createElement(y.P,{total:e.total,title:e.title,seeAllUri:`spotify:app:search:${encodeURIComponent(a)}:topRecommendations`},e.hits.map(((e,a)=>{const s=(0,p.U)(e.uri);return r().createElement(b.ZP,{index:a,key:e.uri,value:"top-recommendations"},r().createElement(s,{onClick:()=>t(e),onPlay:()=>t(e),entity:e}))}))):null,O=({entity:e,query:t,results:{hits:a,total:s}={},prependItemToSearchHistory:c})=>{const{title:l,category:n}=e;if(!a||0===a.length)return null;const o=(0,p.U)(a[0].uri);return r().createElement(y.P,{total:s||0,title:l,seeAllUri:`spotify:app:search:${encodeURIComponent(t)}:${n}`},a.map(((e,t)=>r().createElement(b.ZP,{value:n,index:t,key:e.uri},r().createElement(o,{onClick:()=>c(e),onPlay:()=>c(e),entity:e})))))};var F=a(34514);const G=()=>{const{searchHistory:e,setSearchHistory:t}=(0,k.ZP)(),{results:a,query:s,getResultEntities:c}=r().useContext(o.ci),l=a=>{t([a,...Array.isArray(e)?e:[]])},n=c();return r().createElement(N.T,{className:S,rowGap:F.spacer32,render:()=>r().createElement(b.ZP,{value:"search-results"},r().createElement(w,{topHit:a.topHit,prependItemToSearchHistory:l}),r().createElement(H,{query:s,tracks:a.tracks,prependItemToSearchHistory:l}),r().createElement(z,{query:s,topRecommendations:a.topRecommendations,prependItemToSearchHistory:l}),n.map((e=>r().createElement(O,{key:`search-shelf-${e.category}`,entity:e,query:s,results:a[e.category],prependItemToSearchHistory:l}))))})},B="x-emptySearchResult-emptySearch",Q="x-emptySearchResult-emptySearchTitle",W="x-emptySearchResult-emptySearchSubTitle",j=()=>{const{query:e}=r().useContext(o.ci);return r().createElement("div",{className:B},r().createElement(R.Dy,{as:"h1",variant:R.Dy.canon,className:Q},i.ag.get("search.empty-results-title",e)),r().createElement("p",{className:W},i.ag.get("search.empty-results-text")))},V="x-searchCategoryResults-header";var X=a(93512),J=a(48466),K=a(65821),Y=a(43908);const ee=r().memo((({nrTracks:e,query:t,ariaLabel:a})=>{(0,Y.T)("search-results");const c=(0,s.useCallback)(((e,a)=>(0,J.getSearchCategoryResults)(t,"tracks",e,a).then((e=>{var t,a,s;return(null===(t=e.body)||void 0===t||null===(a=t.results)||void 0===a||null===(s=a.tracks)||void 0===s?void 0:s.hits)||[]}))),[t]),l=(0,s.useCallback)(((e,t)=>{var a;const s=(0,K.Z)(null==e||null===(a=e.album)||void 0===a?void 0:a.images,{desiredSize:40}),c=(e.tags||[]).includes("MOGEF-19+"),l=!(!1===e.is_playable);return r().createElement(Z.e9,{key:t+e.uri,index:t,uri:(0,A.$V)(e),duration_ms:e.duration_ms,name:e.name,artists:e.artists,album:e.album,isPlayable:l,isExplicit:!!e.explicit,isMOGEFRestricted:c,imgUrl:(null==s?void 0:s.url)||""})}),[]);return r().createElement(b.ZP,{value:"search-results-tracklist"},r().createElement(Z.Pv,{ariaLabel:a,key:t,hasHeaderRow:!0,columns:[Z.QD.INDEX,Z.QD.TITLE,Z.QD.ALBUM,Z.QD.DURATION],renderRow:l,resolveUri:e=>e.uri,nrTracks:e,fetchTracks:c,limit:50}))})),te="topRecommendations",ae=(0,c.$j)(null,(e=>({dispatch:e})))((e=>{const[t,a]=(0,s.useState)(!1),c=(0,s.useRef)(),{query:n,results:u,category:d,getResultEntities:m}=r().useContext(o.ci),{title:f,onSearchRequest:h,onSearchCategoryRequest:y,onSearchCategoryLoadMore:b,results:g}=(0,s.useMemo)((({results:e,category:t,query:a,dispatch:s,getResultEntities:r})=>()=>{var c;const n=r().reduce(((e,t)=>(e[t.category]=t.title,e)),{tracks:i.ag.get("search.title.tracks")});return{results:e[t],title:t===te?null===(c=e.topRecommendations)||void 0===c?void 0:c.title:i.ag.get("search.showing-category-query",i.ag.toLocaleLowerCase(n[t]),a),onSearchRequest:e=>{s(l.Z.searchRequest(e))},onSearchCategoryRequest:(e,t)=>{s(l.Z.searchCategoryRequest(e,t))},onSearchCategoryLoadMore:(e,t)=>{s(l.Z.searchCategoryLoadMore(e,t))}}})({results:u,category:d,query:n,dispatch:e.dispatch,getResultEntities:m}),[u,d,n]),E=(g||{}).loadMoreURI,v=(0,s.useCallback)((({loadMoreURI:e,lastLoadedURI:t,category:a,setShouldLoadMoreOnUpdate:s,onSearchCategoryLoadMore:r})=>()=>{e&&e!==t.current?(t.current=e,s(!1),r(e,a)):s(!0)})({loadMoreURI:E,lastLoadedURI:c,category:d,setShouldLoadMoreOnUpdate:a,onSearchCategoryLoadMore:b}),[E,d,a,b]);(0,s.useEffect)((({results:e,category:t,query:a,onSearchRequest:s,onSearchCategoryRequest:r,shouldLoadMoreOnUpdate:c,handleLoadMore:l})=>()=>{e&&e.loadMoreURI||!t||!a||(t===te?s(a):r(a,t)),c&&l()})({results:g,category:d,query:n,onSearchRequest:h,onSearchCategoryRequest:y,shouldLoadMoreOnUpdate:t,handleLoadMore:v}),[JSON.stringify(g),t,d]);const{searchHistory:C,setSearchHistory:I}=(0,k.u9)(),U=e=>I([e,...C]);return r().createElement("div",null,r().createElement(R.Dy,{as:"h1",variant:R.Dy.canon,className:V},f),g&&"tracks"===d&&r().createElement(s.Suspense,{fallback:null},r().createElement(ee,{ariaLabel:f,nrTracks:Math.min(g.total,1e3),query:n})),g&&"tracks"!==d&&r().createElement(X.C,{onReachBottom:v},r().createElement(N.T,{render:()=>g.hits.map((e=>{const t=(0,p.U)(e.uri);return r().createElement(t,{key:e.uri,entity:e,onClick:()=>U(e),onPlay:()=>U(e)})}))})))})),se="x-categoryCard-CategoryCard",re="x-categoryCard-title",ce="_7632e4ea3665ed21c585780677b2aac0-scss",le="x-categoryCard-image";var ne=a(21483);const oe=F.gray30,ie=F.gray50;class ue extends s.PureComponent{render(){const{title:e,imageUrl:t,viewId:a,pageId:s,color:c,href:l}=this.props;return r().createElement(q.r,{to:a&&`/genre/${a}`||l,pageId:s,className:se,style:{backgroundColor:c}},r().createElement("div",{className:ce},t?r().createElement(ne.E,{loading:"lazy",src:t,className:le}):r().createElement("div",{style:{backgroundColor:ie},className:le,"data-testid":"fallback"}),r().createElement("h3",{className:re},e)))}}ue.defaultProps={color:oe};const de="x-heroCategoryCard-HeroCategoryCard",me="c0f71ec678fcda5860625abd19d699d4-scss",fe="x-heroCategoryCard-heroTitle",he="x-heroCategoryCard-heroImage";class ye extends s.PureComponent{render(){const{title:e,imageUrl:t,viewId:a,color:s,pageId:c}=this.props;return r().createElement(q.r,{to:`/genre/${a}`,pageId:c,className:de,style:{backgroundColor:s}},r().createElement("div",{className:me},r().createElement("h3",{className:fe},e),t?r().createElement(ne.E,{loading:"lazy",className:he,src:t}):r().createElement("div",{className:he,style:{backgroundColor:ie},"data-testid":"fallback"})))}}ye.defaultProps={color:oe};const pe="x-carousel-carousel",be="x-carousel-gridScrollWrapper",ge="x-carousel-carouselAnchor",Ee="x-carousel-title",ve="x-carousel-header",ke="x-carousel-buttonContainer",Re="x-carousel-rightButtonContainer",Ce="x-carousel-leftButtonContainer",Ne="x-carousel-button",Ie="x-carousel-carouselGrid";var Ue=a(63404),Se=a(61880),we=a(75222),qe=a(86344),Pe=a(52933),Le=a(11111),xe=a(72519);const _e=(0,qe.P)((e=>{const{title:t,children:a,seeAllUri:c,pageId:l,className:n="",childColumnSpan:o=1}=e,[u,d]=(0,s.useState)(!1),[m,f]=(0,s.useState)(!1),h=(0,s.useRef)(null),y=(0,Le.o)(),p=(0,xe.y)((()=>{!function(e,t,a,s,r){if(null===r.current)return;const{scrollLeft:c,offsetWidth:l,scrollWidth:n}=r.current,o=c>0,i=c+l<n;e!==o&&a(o),t!==i&&s(i)}(u,m,d,f,h)}),200);if(Array.isArray(a)&&0===a.length)return null;const b=Array.isArray(a)?a.length:0;return r().createElement("section",{className:`${n} ${pe}`,"aria-label":t},r().createElement("div",{className:ve},c?r().createElement(q.r,{to:c,pageId:l},r().createElement(R.Dy,{as:"h2",variant:R.Dy.canon,className:Ee},t)):r().createElement(R.Dy,{as:"h2",variant:R.Dy.canon,className:Ee},t)),r().createElement("div",{className:ge},r().createElement("div",{"data-testid":"scroll-wrapper",className:be,ref:h,onScroll:p},r().createElement(N.T,{className:Ie,columnAware:!0,fixedColumnCount:b*o,onUpdate:p,render:(e,t)=>r().createElement(r().Fragment,null,u&&r().createElement("div",{className:`${ke} ${Ce}`},r().createElement(we.E,{className:Ne,onClick:()=>{!function(e,t,a){null!==a.current&&(a.current.scrollLeft-=e*(t+N.w))}(e,t,h),y({intent:"carousel-left",type:"click",itemIdSuffix:"carousel"})},standalone:!0,tabIndex:-1,size:40,ariaLabel:i.ag.get("playback-control.skip-back")},r().createElement(Se.w,{size:24}))),m&&r().createElement("div",{className:`${ke} ${Re}`},r().createElement(we.E,{className:Ne,onClick:()=>{!function(e,t,a){null!==a.current&&(a.current.scrollLeft+=e*(t+N.w))}(e,t,h),y({intent:"carousel-right",type:"click",itemIdSuffix:"carousel"})},standalone:!0,tabIndex:-1,size:40,ariaLabel:i.ag.get("playback-control.skip-forward")},r().createElement(Ue.X,{size:24}))),a)}))))}),(()=>null),(e=>(0,Pe.v)({from:"Carousel",error:e}))),Te="x-searchBrowse-SearchBrowse",Me="x-searchBrowse-browseAllWrapper";class De extends r().PureComponent{render(){const{topGenres:e,browseAll:t}=this.props;return e||t?r().createElement("div",{className:Te},e&&r().createElement(b.ZP,{value:"top-genre"},r().createElement(_e,{title:e.title,childColumnSpan:2},e.items.map((({viewId:e,color:t,title:a,imageUrl:s},c)=>r().createElement(b.ZP,{key:e,index:c,value:"hero-category-card"},r().createElement(ye,{title:a,viewId:e,pageId:"search",color:t,imageUrl:s})))))),t&&r().createElement("div",{className:Me},r().createElement(y.P,{title:t.title,showAll:!0},t.items.map((({viewId:e,color:t,title:a,imageUrl:s,href:c})=>r().createElement(ue,{key:e||c,title:a,viewId:e,pageId:"search",href:c,color:t,imageUrl:s})))))):null}}const Ze=(0,c.$j)((e=>({topGenres:e.browse.topGenres,browseAll:e.browse.browseAll})))(De);var Ae=a(88706),$e=a(24827);const He="x-searchPage-searchPageGrid";var ze=a(53089),Oe=a(50760);const Fe=()=>{const e=(0,ze.W6)(Oe.dE),t=(0,c.I0)();return(0,s.useEffect)((()=>{t(l.Z.browseRequest(e))}),[e,t]),null},Ge=["playlists","albums","artists","tracks","shows","episodes","topRecommendations","shows","profiles","genres"],Be=(e,t)=>{const a="{}"!==JSON.stringify(e),s=Object.keys(e).some((t=>Number(e[t].total)>0));return r().createElement(r().Fragment,null,r().createElement($e.w,null,r().createElement(Ae.M,null)),r().createElement(u.AW,{exact:!0,path:"/search"},r().createElement(C,null),!t&&r().createElement(Ze,null)),r().createElement(u.AW,{exact:!0,path:"/search/:query"},a&&s&&r().createElement(G,null),a&&!s&&r().createElement(j,null)),r().createElement(u.AW,{path:"/search/:query/:category",component:ae}))},Qe=()=>[{title:i.ag.get("search.title.artists"),category:"artists"},{title:i.ag.get("search.title.albums"),category:"albums"},{title:i.ag.get("search.title.playlists"),category:"playlists"},{title:i.ag.get("search.title.shows"),category:"shows"},{title:i.ag.get("search.title.episodes"),category:"episodes"},{title:i.ag.get("search.title.profiles"),category:"profiles"},{title:i.ag.get("search.title.genres"),category:"genres"}];const We=r().memo((()=>{const e=(0,c.I0)(),t=(0,u.k6)(),{queryFromUrl:a,category:d}=function(){const{query:e="",category:t}=(0,u.UO)();let a;try{a=decodeURIComponent(e)}catch(t){a=e}return{queryFromUrl:a,category:t}}(),m=(0,u.TH)(),f=new URLSearchParams(m.search),h=Boolean(f.get("showRecent")),y=(0,c.v9)((e=>e.fusionSearch.results)),p=(0,s.useCallback)(((a,s)=>{s?t.push(`/search/${encodeURIComponent(a)}`):t.replace(`/search/${encodeURIComponent(a)}`),e(l.Z.searchRequest(a))}),[t,e]);(0,s.useEffect)((()=>{e((0,n.Dk)(i.ag.get("search.page-title")))}),[e]),(0,s.useEffect)((()=>{!a||d||h||p(a)}),[d,a,h,p]),(0,s.useEffect)((()=>{""===a&&e(l.Z.clearSearchResults())}),[e,a]);const g={results:y,query:a,showRecent:h,category:d,onSearchRequest:p,getResultEntities:Qe};return r().createElement(o.ci.Provider,{value:g},r().createElement(b.ZP,{value:"search-page"},r().createElement("div",{className:"contentSpacing",id:"searchPage"},r().createElement(N.T,{className:He,render:()=>Be(y,h)}))),r().createElement(s.Suspense,{fallback:null},r().createElement(Fe,null)))})),je=We}}]);