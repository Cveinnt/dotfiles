(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[379],{31044:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ee});var l=a(34514),s=a(49329),n=a(27378),c=a.n(n),r=a(79308);const i="collection-local-files-localFiles-container",o="collection-local-files-localFiles-searchBoxContainer";var d=a(61043),u=a(39551),m=a(86883),g=a(47620),f=a(58681),b=a(55157),E=a(74544),h=a(16782),p=a(60858),y=a(38517),k=a(7593),v=a(65821),x=a(24878),C=a(1927),S=a(35381),F=a(80296),N=a(70568),w=a(1976),P=a(5464),D=a.n(P),_=a(65892),U=a(61515),Z=a(31258),L=a(38533),I=a(89141),R=a(21114);const A=c().memo((({uri:e,uid:t,name:a,duration_ms:l,artists:s,album:r,isMOGEFRestricted:i,isExplicit:o,isPlayable:u,index:m,contextUri:g,handlePlayback:f,imgUrl:b})=>{const{filter:E}=(0,n.useContext)(L.fo),h=(0,U.z)(((e,a)=>{f(t,m,a)}),Z.s_),p=(0,_.P)(),{badges:y,hasBadges:v}=(0,F.r)({isExplicit:o}),P=(null==s?void 0:s.map((e=>e.name)).join(d.ag.getSeparator()))||"";return c().createElement(k.ZP,{value:"row",index:m},c().createElement(R._,{menu:c().createElement(I.N,{uri:e,uid:t,contextUri:g})},c().createElement(S.c,{uri:e,contextUri:g,uid:t,index:m,onPlay:h,ariaRowIndex:m+1,isPlayable:u,ageRestricted:i,dragMetadata:{name:a,createdBy:P}},c().createElement(C.Dd,{ariaColIndex:0},c().createElement(C.Du,{playAriaLabel:d.ag.get("tracklist.a11y.play",a,P),playUri:e,onPlay:h,contextUri:g,uid:t},c().createElement(C.km,null,m+1))),c().createElement(C.vZ,{ariaColIndex:1},c().createElement(C.lD,{src:b||(0,w.c)()}),c().createElement(C.vm,null,c().createElement(C.Wh,null,c().createElement(D(),{searchWords:[E],textToHighlight:a,findChunks:p,highlightClassName:x.Z.filterHighlight})),v&&c().createElement(C.g3,null,y.explicit?c().createElement(N.N,null):null),c().createElement(C.K9,null,s&&c().createElement(_.o,{nonInteractive:!0,artists:s,filter:E})))),c().createElement(C.UA,{ariaColIndex:2},r.name&&c().createElement(C.BM,{nonInteractive:!0,uri:r.uri,name:r.name},c().createElement(D(),{searchWords:[E],textToHighlight:r.name,findChunks:p,highlightClassName:x.Z.filterHighlight}))),c().createElement(C.mU,{ariaColIndex:3},c().createElement(C.A$,{duration:l}),c().createElement(C.Zv,{menu:c().createElement(I.N,{uri:e,uid:t,contextUri:g})})))))}),((e,t)=>e.uri===t.uri&&e.index===t.index));var z=a(44471);const O=new Set(z.MI),T=c().memo((({uri:e,tracks:t,columns:a,sortState:l,handleSort:s,handlePlayback:r})=>{const i=(0,n.useRef)(null),o=(0,n.useCallback)(((t,a)=>{const l=(0,v.Z)(t.album.images,{desiredSize:40,desiredLabel:"small"});return c().createElement(A,{key:t.uid,index:a,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,handlePlayback:r,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album,isExplicit:t.isExplicit,isMOGEFRestricted:t.is19PlusOnly,type:t.type,imgUrl:(null==l?void 0:l.url)||""})}),[e,r]);return c().createElement(c().Fragment,null,c().createElement(k.ZP,{value:"playlist-tracklist"},c().createElement(y.Pv,{key:e,ariaLabel:d.ag.get("local-files"),hasHeaderRow:!0,columns:a,sortableColumns:O,sortState:l,onSort:s,renderRow:o,resolveUri:e=>e.uri,resolveUid:e=>e.uid,tracks:t,nrTracks:t.length,limit:100,outerRef:i})))}));var B=a(29088),M=a(23301),Q=a(96415),$=a(24817),H=a(8131),X=a(67101),W=a(98417),q=a(77964),G=a(4467),J=a(59908),K=a(85261),V=a(6070);const j=[y.QD.INDEX,y.QD.TITLE,y.QD.ALBUM,y.QD.DURATION],Y=()=>{const e=(0,r.v9)(Q.dO),{filter:t}=(0,n.useContext)(L.fo),{sortState:a,setSortState:y}=(0,n.useContext)(z.Gb),k=(0,n.useContext)($.t),{useNamespacedLocalStorage:v}=(0,n.useContext)(J.Xz),[x]=v(K.J,!1),C=(0,g.sn)(),[S,F]=(0,n.useState)([]),N=(0,G.Y)(l.kleinBlue),w=(0,n.useCallback)((e=>{y((0,X.VK)(e,a))}),[a,y]),P=(0,n.useCallback)((async()=>{const e=await k.getContents({sort:(0,X._j)(a),filter:(0,X.$u)(t)});F(e.items)}),[k,a,t]);(0,n.useEffect)((()=>{P()}),[P]);const D=(0,r.oR)(),_=(0,n.useCallback)(((e,t,a)=>{const l=D.getState(),s=(0,W.d6)(l,H.bf)&&(0,W.Xw)(l,e);(0,W.QL)(l,H.bf)&&(0,W.er)(l,e)?(D.dispatch((0,M.wO)()),(0,W.nF)(a,"pause")):s?(D.dispatch((0,M.v4)()),(0,W.nF)(a,"play")):(D.dispatch((0,M.cV)(t,S,H.bf)),(0,W.nF)(a,"play"))}),[D,S]);if(!C)return c().createElement(p.h,{errorMessage:d.ag.get("error.request-artist-failure")});if(0===C.totalLength||!x)return c().createElement(B.u,{linkTo:"/preferences",linkTitle:d.ag.get("local-files.empty-button"),message:d.ag.get("local-files.empty-description"),title:d.ag.get("local-files.empty-header")},c().createElement(s.X,{iconSize:64}));const U=e.isPlaying&&e.contextURI===H.bf,Z=()=>{const e=D.getState(),t=(0,W.d6)(e,H.bf);(0,W.QL)(e,H.bf)?D.dispatch((0,M.wO)()):t?D.dispatch((0,M.v4)()):D.dispatch((0,M.cV)(0,S,H.bf))};return c().createElement("div",{className:i},c().createElement(E.gF,{backgroundColor:N},c().createElement(f.W,null,c().createElement(h.$,{size:u.qE.sm,onClick:Z,isPlaying:U,uri:H.bf}),c().createElement(b.i,{text:d.ag.get("local-files")})),c().createElement(E.sP,null,c().createElement(E.xd,null,d.ag.get("local-files")),c().createElement(E.T0,null,d.ag.get("local-files.description")))),c().createElement(m.o,{backgroundColor:N},c().createElement(m.F,null,c().createElement(h.$,{size:u.qE.xl,onClick:Z,isPlaying:U,uri:H.bf}),c().createElement("div",{className:o},c().createElement(q.K,{placeholder:d.ag.get("playlist.search_in_playlist")}),c().createElement(V.c,{columns:z.MI})))),c().createElement("div",{className:"contentSpacing"},c().createElement(T,{tracks:S,uri:H.bf,columns:j,handleSort:w,sortState:a,handlePlayback:_})))},ee=()=>c().createElement(z.kz,{uri:"spotify:internal:local-files"},c().createElement(L.hz,{uri:"spotify:internal:local-files"},c().createElement(Y,null)))},85261:(e,t,a)=>{"use strict";a.d(t,{J:()=>h,P:()=>p});var l=a(42065),s=a(61043),n=a(37339),c=a(27378),r=a.n(c),i=a(35415),o=a(53177),d=a(34514);const u=({source:e,onAddOrRemoveSource:t})=>{const[a,s]=(0,c.useState)(e.enabled);return r().createElement(r().Fragment,null,r().createElement(o.Dy,{as:"span",variant:o.Dy.mesto,color:d.gray70,htmlFor:`settings.local-files.${e.id}`},e.name),r().createElement(n.Z,{className:l.Z.secondColumn,id:`settings.local-files.${e.id}`,value:a,onSelected:a=>{s(a),t(e.id,a)}}))};var m=a(93592),g=a(24817);const f=new m.J({idPrefix:"local-files-sources-live-region-"}),b=()=>{const[e,t]=(0,c.useState)([]),a=(0,c.useContext)(g.t),n=(0,c.useCallback)((async()=>t(await a.getSources())),[a]);(0,c.useEffect)((()=>{n()}),[n]),(0,c.useEffect)((()=>f.clearNode()),[]);const d=(0,c.useCallback)((async()=>{const e=await a.browseForFolder();e.path&&(await a.addSource(e.path),n(),f.say(s.ag.get("settings.localFilesFolderAdded",e.path)))}),[a,n]),m=(0,c.useCallback)(((e,t)=>{t?a.addSource(e):a.removeSource(e)}),[a]);return r().createElement(r().Fragment,null,r().createElement(o.Dy,{as:"h3",variant:o.Dy.balladBold,className:l.Z.title},s.ag.get("settings.showSongsFrom")),e.map((e=>e.found?r().createElement(u,{key:e.id,source:e,onAddOrRemoveSource:m}):null)),r().createElement(i.z,{"aria-label":s.ag.get("settings.addASource"),className:l.Z.button,version:"outlined",onClick:()=>{d()}},s.ag.get("settings.addASource")))};var E=a(59908);const h="showLocalFiles",p=()=>{const{useNamespacedLocalStorage:e}=(0,c.useContext)(E.Xz),[t,a]=e(h,!1);return r().createElement(r().Fragment,null,r().createElement(o.Dy,{as:"h2",variant:o.Dy.cello,className:l.Z.title},s.ag.get("settings.localFiles")),r().createElement(o.Dy,{as:"label",variant:o.Dy.mesto,color:d.gray70,htmlFor:"settings.showLocalFiles"},s.ag.get("settings.showLocalFiles")),r().createElement(n.Z,{className:l.Z.secondColumn,id:"settings.showLocalFiles",value:t,onSelected:e=>{a(e)}}),t?r().createElement(b,null):null)}},37339:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});const l="x-toggle-wrapper",s="x-toggle-indicatorWrapper",n="x-toggle-input",c="x-toggle-indicator";var r=a(60042),i=a.n(r),o=a(27378),d=a.n(o);const u=({value:e,disabled:t,onSelected:a,id:r,className:o})=>d().createElement("label",{className:i()(l,o)},d().createElement("input",{id:r,className:n,type:"checkbox",disabled:t,checked:e,onChange:e=>{const t=e.target.checked;a(t)}}),d().createElement("span",{className:s},d().createElement("span",{className:c})))},42065:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});const l={container:"x-settings-container",header:"x-settings-header",secondColumn:"x-settings-secondColumn",facebookButton:"x-settings-facebookButton",buttonContainer:"x-settings-buttonContainer",title:"x-settings-title",button:"x-settings-button",crossFadeContainer:"x-settings-crossFadeContainer",restartAppButton:"x-settings-restartAppButton",input:"x-settings-input"}}}]);