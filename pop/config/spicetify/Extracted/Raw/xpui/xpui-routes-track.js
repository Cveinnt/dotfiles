(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[730],{64273:(t,e,n)=>{"use strict";n.r(e),n.d(e,{TrackContainer:()=>y,mapStateToProps:()=>k,default:()=>m});var i=n(65526),o=n.n(i),s=n(27378),a=n.n(s),r=(n(23615),n(15941)),l=n(23301),c=n(45106),d=n(79308),p=n(66917),u=n.n(p),h=n(2146);class y extends s.PureComponent{constructor(...t){super(...t),o()(this,"handleRedirectToAlbum",(()=>{const{uri:t,track:e,indexOfTrackInAlbum:n}=this.props;if(!e)return;const{album:{uri:i}}=e;this.playOrRedirectToContext(t,n,i)}))}componentDidMount(){const{onRequestTrack:t,uri:e,isContextPlaylist:n,context:i,onRequestPlaylist:o}=this.props;t(e),n?(o(i),this.handleRedirectToPlaylist()):this.handleRedirectToAlbum()}componentDidUpdate(){const{isContextPlaylist:t}=this.props;t?this.handleRedirectToPlaylist():this.handleRedirectToAlbum()}handleRedirectToPlaylist(){const{context:t,uri:e,indexOfTrackInContext:n}=this.props;void 0!==n&&(-1===n?this.handleRedirectToAlbum():this.playOrRedirectToContext(e,n,t))}playOrRedirectToContext(t,e,n){const{anonymous:i,player:o,playbackReady:s,onPlayTrack:a}=this.props,r=`${u().from(n).toURLPath(!0)}?highlight=${t}`;i?this.props.history.push(r):s&&(o&&!o.paused||e>-1&&a(e,n,t),this.props.history.replace(r))}render(){return a().createElement("section",null)}}const k=(t,e)=>{const n=`spotify:track:${e.match.params.trackId.split("&")[0]}`,i=t.entities.tracks[n],o=t.playback.player,s=t.playback.statusUpdatedOnce,{isAnonymous:a}=(0,h.Gg)(t),r=e.location&&e.location.query&&e.location.query.context,l=u().isPlaylistV1OrV2(r);let c;if(l&&t.entities&&t.entities.all){const e=t.entities.all[r];e&&(c=e.tracks.items.findIndex((({track:t})=>t&&(t.uri===n||t.linked_from&&t.linked_from.uri===n))))}return{uri:n,indexOfTrackInAlbum:i&&(isNaN(i.indexOfTrackInAlbum)?i.track_number-1:i.indexOfTrackInAlbum),track:i,player:o,playbackReady:s,anonymous:a,context:r,isContextPlaylist:l,indexOfTrackInContext:c}},m=(0,d.$j)(k,(t=>(0,c.DE)({onRequestTrack:r.Kc,onPlayTrack:l.z8,onRequestPlaylist:r.fw},t)))(y)}}]);