(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[835],{30516:(e,t,a)=>{"use strict";a.r(t),a.d(t,{CollectionConcerts:()=>j,default:()=>z});var c=a(27378),n=a.n(c),s=a(34514),o=a(53089),r=a(50760),l=a(60858),i=a(29088),d=a(15941),m=a(79308),g=a(61043),u=a(7593),f=a(74544),h=a(58681),b=a(55157),_=(a(23615),a(60247)),p=a(60042),E=a.n(p),y=a(76968),v=a(27245),L=a(28523),N=a(747),D=a(53177);const k={locationContainer:"artist-concertLocation-locationContainer",locationName:"artist-concertLocation-locationName",clearSuggestions:"artist-concertLocation-clearSuggestions",hide:"artist-concertLocation-hide",changeLocation:"artist-concertLocation-changeLocation",changeLocationDropdown:"artist-concertLocation-changeLocationDropdown",changeLocationInputLabel:"artist-concertLocation-changeLocationInputLabel",changeLocationInput:"artist-concertLocation-changeLocationInput",searchInputSearchIcon:"artist-concertLocation-searchInputSearchIcon",changeLocationLabel:"artist-concertLocation-changeLocationLabel",changeLocationList:"artist-concertLocation-changeLocationList",changeLocationError:"artist-concertLocation-changeLocationError",changeLocationLink:"artist-concertLocation-changeLocationLink",changeLocationItem:"artist-concertLocation-changeLocationItem",button:"artist-concertLocation-button",locationLink:"artist-concertLocation-locationLink"},S="location_no_results",C="location_fetch_error",w={[S]:g.ag.get("concert.error.no_locations_found_subtitle"),[C]:g.ag.get("concert.error.general_error_title")},I=e=>{const t=n().createRef(),a=n().createRef(),[s,o]=(0,c.useState)(""),[r,l]=(0,c.useState)(-1),[i,d]=(0,c.useState)([]),[m,u]=(0,c.useState)(null),{placeholder:f,onSelectLocation:h,hideLocationSelector:b}=e,p=(0,y.D)((()=>{L.LH.fetchLocationQuery(v.b.getInstance(),s).then((e=>{const{body:{results:t=[]}={}}=e;d(t),t.length?u(null):u(S)}),(()=>{d([]),u(C)}))}))(250),I=e=>{o(e),l(-1),d([]),u(null),e&&e.length>1&&p(e)};let $=E()(k.clearSuggestions,k.hide);return(i&&i.length||m===S)&&($=k.clearSuggestions),n().createElement("div",{className:k.changeLocation,"data-interaction-context":"location-selector"},n().createElement("div",{className:k.changeLocationDropdown,onKeyDown:e=>{const c=38,n=40,s=27,o=9,d=e.which;let m=r;switch([s,n,c,o].indexOf(d)>-1&&e.preventDefault(),d){default:return;case s:return void h(null);case c:m=Math.max(r-1,-1);break;case n:case o:m=Math.min(r+1,i.length-1);break;case 13:h(i[r])}if(m<0)t.current.focus();else{const e=a.current.childNodes[m];e&&e.focus()}l(m)},role:"searchbox",onBlur:e=>{e.relatedTarget||(I(""),b())}},n().createElement("div",{className:k.changeLocationForm},n().createElement("div",{className:E()(k.changeLocationLabel,"spoticon-search-16")},n().createElement("input",{className:k.changeLocationInput,type:"search",id:"change-location-input",placeholder:f,value:s,onChange:e=>I(e.target.value),ref:t,"aria-label":f,autoFocus:!0}),n().createElement("button",{className:$,"aria-label":g.ag.get("search.a11y.clear-input"),onClick:()=>I("")},n().createElement(N.Z,{size:16})))),n().createElement("ol",{className:k.changeLocationList,ref:a},m&&n().createElement(D.Dy.li,{className:k.changeLocationError},n().createElement("span",{className:"spoticon spoticon-warning-16"})," ",w[m]),i&&i.length&&i.map(((e,t)=>n().createElement(D.Dy.li,{weight:D.vS.book,key:t,className:k.changeLocationItem,tabIndex:t+1},n().createElement(_.rU,{to:"#",className:k.changeLocationLink,onClick:()=>h(e),role:"button"},e.location))))||null)))},$=e=>{const{handleLocationChange:t,locationStr:a}=e,[s,o]=(0,c.useState)(!1);return n().createElement("div",{className:k.locationContainer},n().createElement(D.Dy.h1,{variant:D.$e.alto},g.ag.get("concerts_shows_in")),n().createElement("span",null,s&&n().createElement(I,{placeholder:g.ag.get("concerts.input.search_placeholder"),onSelectLocation:e=>{t(e),o(!1)},hideLocationSelector:()=>o(!1)}),!s&&n().createElement(D.Dy.h2,{variant:D.$e.alto,className:k.locationName,dir:"auto",onClick:o,role:"button"},a)))};var O=a(75604),x=a(393),M=a(26268),P=a(47050);const R="collection-concerts-collectionConcerts-sectionContainer",F="collection-concerts-collectionConcerts-header",T="collection-concerts-collectionConcerts-concertsContainer";var U=a(4467);const A={Online:g.ag.get("concerts_upcoming_virtual_events"),Recommended:g.ag.get("concerts_recommended_for_you"),Popular:g.ag.get("concerts_popular_near_you"),Playlists:g.ag.get("playlists")},J=s.midnight,Z=e=>{var t,a;const{collection:c,concertMetadata:s,handleLocationChange:o}=e,r=(null===(t=c.concerts)||void 0===t?void 0:t.items)||[],d=null===(a=c.concerts)||void 0===a?void 0:a.isFetching,m=s.userLocation.name||g.ag.get("concerts.default_location"),f=e=>{if("playlist"===e.type)return n().createElement(x.Z,{entity:e});if(!e.concerts||!e.concerts.length)return null;const t=e.concerts[0];return n().createElement(M.k,{entity:t,isVirtual:"online"===e.source})};if(d)return n().createElement(l.h,{errorMessage:g.ag.get("error.request-browse-concerts-failure")});if(!r.length)return n().createElement(i.u,{title:g.ag.get("concerts.error.no_concerts_found_title"),message:g.ag.get("concerts.error.no_concerts_found_message",m)});return n().createElement("div",{className:T},n().createElement("div",{className:R},n().createElement($,{handleLocationChange:o,locationStr:m})),(()=>{const e=(e=>{const t={Online:[],Recommended:[],Popular:[],Playlists:s.playlists};return e.reduce(((e,t)=>("recommendation"===t.source?e.Recommended.push(t):"popular"===t.source?e.Popular.push(t):"online"===t.source&&e.Online.push(t),e)),t)})(r);return Object.keys(e).map(((t,a)=>{const c=e[t];return n().createElement("div",{key:t,className:R},n().createElement(u.ZP,{value:"headered-grid",index:a},n().createElement(P.P,{total:c.length,title:A[t],showAll:!0},c.map(f))))}))})())},j=n().memo((()=>{const e=(0,m.I0)(),t=(0,o.W6)(r.QD),a=(0,m.v9)((e=>e.entities.collection)),s=(0,m.v9)((e=>e.concerts)),l=s.userLocation.name||g.ag.get("concerts.default_location");(0,c.useEffect)((()=>{e((0,d.AJ)(null,t))}),[e,l,t]);const i=(0,U.Y)(J);return n().createElement("section",{className:F},n().createElement(f.gF,{size:f.fR.SMALL,backgroundColor:J},n().createElement(f.sP,null,n().createElement(f.xd,null,g.ag.get("concerts.label"))),n().createElement(h.W,null,n().createElement(b.i,{text:g.ag.get("concerts.label")}))),n().createElement(O.I,{backgroundColor:i}),n().createElement(Z,{collection:a,concertMetadata:s,handleLocationChange:a=>{a&&a.geonameId&&e((0,d.AJ)(a.geonameId,t))}}))})),z=j},26268:(e,t,a)=>{"use strict";a.d(t,{k:()=>E});var c=a(27378),n=a.n(c),s=a(20557),o=a(30245),r=a(27816),l=a(53177);const i="concert-concertCard-ConcertCard",d="concert-concertCard-date",m="concert-concertCard-dateMonth",g="concert-concertCard-dateDay",u="concert-concertCard-metadata",f="concert-concertCard-title",h="concert-concertCard-location",b="concert-concertCard-fullDate",_="concert-concertCard-image";var p=a(52702);const E=n().memo((e=>{const{entity:t,isVirtual:a}=e,{venue:{name:c,location:{name:E}}}=t,y=t.artists[0],v=(0,s.ij)(t),L=new Date(t.date.isoString);return n().createElement(o.r,{to:`/concert/${t.id}`,className:i},y.imageUri?n().createElement(r.Z,null,n().createElement("div",{"data-testid":"image-container",className:_,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${y.imageUri})`}})):null,n().createElement("time",{className:d,dateTime:t.date.isoString},n().createElement(l.Dy.h5,{variant:l.$e.minuetBold,className:m},(0,s.lJ)(L)),n().createElement(l.Dy.h1,{variant:l.$e.canon,className:g},L.getDate())),n().createElement("div",{className:u,dir:"auto"},n().createElement(l.Dy.h2,{className:b,variant:l.$e.minuetBold},(0,p.FO)(L),", ",(0,s.b8)(L)),n().createElement(l.Dy.h2,{variant:l.$e.cello,weight:l.vS.bold,className:f},v),n().createElement(l.Dy.h2,{className:h,variant:l.$e.mesto,"data-testid":"location-name"},a?c:`${c}, ${E}`)))}))},20557:(e,t,a)=>{"use strict";a.d(t,{Ms:()=>n,b8:()=>s,lJ:()=>o,NL:()=>r,O1:()=>l,Yl:()=>m,ij:()=>g});var c=a(61043);const n=e=>c.ag.formatDate(e,{weekday:"short",month:"short",day:"numeric"}),s=e=>c.ag.formatDate(e,{hour:"numeric",minute:"numeric"}),o=e=>c.ag.formatDate(e,{month:"short"}).toUpperCase(),r=e=>c.ag.formatDate(e,{month:"short",day:"numeric"}).toUpperCase(),l=e=>e<new Date,i={row:{1:e=>c.ag.get("concert.header.entity_title_1",...e),2:e=>c.ag.get("concert.header.entity_title_2",...e),3:e=>c.ag.get("concert.header.entity_title_3",...e),4:e=>c.ag.get("concert.header.entity_title_4",...e),more:e=>c.ag.get("concert.header.entity_title_more",...e)},entity:{1:e=>c.ag.get("concert.header.upcoming_concert_title_1",...e),2:e=>c.ag.get("concert.header.upcoming_concert_title_2",...e),3:e=>c.ag.get("concert.header.upcoming_concert_title_3",...e),4:e=>c.ag.get("concert.header.upcoming_concert_title_4",...e),more:e=>c.ag.get("concert.header.upcoming_concert_title_more",...e)}},d=(e,t)=>{const a=i[t],c=(e=>{try{return e.festival&&e.title?{title:e.title}:{artists:e.artists.map((e=>e.name||e.profile.name))}}catch(e){return null}})(e);if(c){if(c.title)return c.title;if(c.artists)return c.artists.length>4?a.more(c.artists):a[c.artists.length](c.artists)}return""},m=e=>d(e,"row"),g=e=>d(e,"entity")},29088:(e,t,a)=>{"use strict";a.d(t,{u:()=>h});var c=a(27378),n=a.n(c),s=a(60042),o=a.n(s),r=a(53177),l=a(35415);const i="x-emptyState-container",d="x-emptyState-renderInline",m="x-emptyState-button",g="x-emptyState-title",u="x-emptyState-subtitle";var f=a(53267);const h=n().memo((e=>{const{children:t,message:a,title:c,linkTitle:s,linkTo:h,onClick:b,renderInline:_=!1}=e,{isXSOnly:p,isSMOnly:E}=(0,f.e)(),y=p||E;return n().createElement("section",{className:o()(i,{[d]:_})},t,n().createElement(r.Dy.h1,{variant:y?r.Dy.cello:r.Dy.alto,className:g},c),n().createElement(r.Dy,{variant:y?r.Dy.mesto:r.Dy.ballad,className:u},a),s&&(h||b)&&n().createElement(l.z,{version:"secondary",className:m,linkTo:h,onClick:b},s))}))}}]);